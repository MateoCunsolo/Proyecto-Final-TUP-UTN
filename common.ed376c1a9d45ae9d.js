"use strict";(self.webpackChunkProyecto=self.webpackChunkProyecto||[]).push([[76],{6225:(y,u,n)=>{n.d(u,{l:()=>m});var s=n(4438),l=n(9885),a=n(4937);let m=(()=>{class h{constructor(i,f){this.userService=i,this.router=f}canActivate(i,f){return!!this.userService.isUsuarioAutenticado()||this.router.parseUrl("/login")}static#t=this.\u0275fac=function(f){return new(f||h)(s.KVO(l.D),s.KVO(a.Ix))};static#e=this.\u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},4804:(y,u,n)=>{n.d(u,{c:()=>f});var s=n(177),l=n(4937),a=n(4438);const m=[];let h=(()=>{class t{static#t=this.\u0275fac=function(o){return new(o||t)};static#e=this.\u0275mod=a.$C({type:t});static#r=this.\u0275inj=a.G2t({imports:[l.iI.forChild(m),l.iI]})}return t})();var d=n(401),i=n(9417);let f=(()=>{class t{static#t=this.\u0275fac=function(o){return new(o||t)};static#e=this.\u0275mod=a.$C({type:t});static#r=this.\u0275inj=a.G2t({imports:[s.MD,h,d.G,i.YN]})}return t})()},9885:(y,u,n)=>{n.d(u,{D:()=>d});var s=n(467),l=n(6648),a=n(4438),m=n(1626),h=n(4937);let d=(()=>{class i{constructor(t,e){this.http=t,this.router=e,this.url="https://api-rest-postgresql-5tis.onrender.com/users"}getUsers(){return this.http.get(this.url)}getOneUser(t){return this.http.get(this.url)}getListsNamesForID(t){return this.http.get(`${this.url}/list/${t}`)}getMoviesForList(t,e){return console.log(`URL: ${this.url}/list/${t}/${e}`),this.http.get(`${this.url}/list/${t}/${e}`)}getPassword(t){return(0,l.H)(fetch(`${this.url}/admin/${t}`).then(e=>e.json()))}checkIfUsernameExists(t){return(0,l.H)(fetch(this.url).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>e.some(r=>r.username===t)))}isUsuarioAutenticado(){return!!this.getUserSessionStorage()}checkIfEmailExists(t){return(0,l.H)(fetch(this.url).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>e.some(r=>r.email===t)))}postUser(t){var e=this;return(0,s.A)(function*(){try{const r=JSON.stringify({userName:t.username,email:t.email,password:t.password,lists:t.lists,comments:t.comments});yield fetch(e.url,{method:"POST",body:r,headers:{"Content-type":"application/json"}}),console.log("ESTE ES EL USUARIO POST "+r)}catch(r){console.log(r)}e.router.navigate(["signin"])})()}addCommentToUser(t,e){var r=this;return(0,s.A)(function*(){try{let o=JSON.stringify({text:e.text,idMovie:e.idMovie});yield fetch(`${r.url}/${t}/AddComment`,{method:"POST",body:o,headers:{"Content-type":"application/json"}})}catch(o){console.error("Error in addCommentToUser:",o)}})()}deleteList(t,e){var r=this;return(0,s.A)(function*(){try{const o=JSON.stringify({id:t,list:e});yield fetch(`${r.url}/${t}/deleteList`,{method:"DELETE",body:o,headers:{"Content-type":"application/json"}})}catch(o){console.log(o)}})()}addMovieToList(t,e,r){var o=this;return(0,s.A)(function*(){try{const c=JSON.stringify({id:t,list:e,idMovie:r});yield fetch(`${o.url}/${t}/${e}/${r}`,{method:"POST",body:c,headers:{"Content-type":"application/json"}})}catch(c){console.log(c)}})()}deleteMovieFromList(t,e,r){var o=this;return(0,s.A)(function*(){try{console.log("ID: "+t+" LIST: "+e+" IDMOVIE: "+r);const c=JSON.stringify({id:t,list:e,idMovie:r});yield fetch(`${o.url}/${t}/${e}/${r}`,{method:"DELETE",body:c,headers:{"Content-type":"application/json"}})}catch(c){console.log("Error en deleteMovieFromList:",c)}})()}getUserName(t){var e=this;return(0,s.A)(function*(){try{return yield e.http.get(`${e.url}/${t}`).toPromise()}catch(r){throw console.log("Error en getUserName:",r),r}})()}checkIfUsernameAvailable(t){var e=this;return(0,s.A)(function*(){try{const o=(yield fetch(e.url).then(c=>c.json())).find(c=>c.username===t);return console.log("El usuario existe? "+o),!!o}catch(r){return console.log(r),!1}})()}changeUsername(t,e){var r=this;return(0,s.A)(function*(){try{const o=JSON.stringify({newUsername:e});yield fetch(`${r.url}/${t}/UpdateUserName`,{method:"PUT",body:o,headers:{"Content-type":"application/json"}})}catch(o){console.log(o)}})()}changePassword(t,e){var r=this;return(0,s.A)(function*(){try{const o=JSON.stringify({newPassword:e});yield fetch(`${r.url}/${t}/UpdatedUserPassword`,{method:"PUT",body:o,headers:{"Content-type":"application/json"}})}catch(o){console.log(o)}})()}changeEmail(t,e){var r=this;return(0,s.A)(function*(){try{const o=JSON.stringify({newEmail:e});yield fetch(`${r.url}/${t}/UpdateUserEmail`,{method:"PUT",body:o,headers:{"Content-type":"application/json"}})}catch(o){console.log(o)}})()}deleteUser(t){return(0,l.H)(fetch(`${this.url}/${t}`,{method:"DELETE"}).then(r=>r.json()))}setUserSessionStorage(t){sessionStorage.setItem("user",JSON.stringify(t))}getUserSessionStorage(){const t=sessionStorage.getItem("user");return t?JSON.parse(t):null}createNewList(t,e){var r=this;return(0,s.A)(function*(){try{const o=JSON.stringify({id:t,list:e});yield fetch(`${r.url}/${t}/${e}`,{method:"POST",body:o,headers:{"Content-type":"application/json"}})}catch(o){console.log(o)}})()}updateNameList(t,e,r){var o=this;return(0,s.A)(function*(){try{const c=JSON.stringify({id:t,list:e,newName:r});yield fetch(`${o.url}/${t}/UpdateNameList`,{method:"PUT",body:c,headers:{"Content-type":"application/json"}})}catch(c){console.log(c)}})()}getUsernameAvailability(t){return(0,l.H)(fetch(this.url).then(e=>e.json()).then(e=>!e.find(r=>r.username===t)))}getEmailAvailability(t){return(0,l.H)(fetch(this.url).then(e=>e.json()).then(e=>!e.find(r=>r.email===t)))}changeListName(t,e,r){const o=`${this.url}/${t}`;return(0,l.H)(fetch(o).then(c=>c.json()).then(c=>{const g=[...c.lists];g[r]={...g[r],name:e};const p={...c,lists:g};return fetch(o,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(_=>_.json())}))}getCommentsForMovie(t){var e=this;return(0,s.A)(function*(){return(0,l.H)(fetch(`${e.url}/comments/${t}`).then(r=>r.json()))})()}static#t=this.\u0275fac=function(e){return new(e||i)(a.KVO(m.Qq),a.KVO(h.Ix))};static#e=this.\u0275prov=a.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},1765:(y,u,n)=>{n.d(u,{n:()=>l});var s=n(4438);let l=(()=>{class a{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(d){return new(d||a)};static#e=this.\u0275cmp=s.VBU({type:a,selectors:[["app-footer"]],decls:11,vars:0,consts:[["href","https://www.linkedin.com/in/mateo-cunsolo/","target","_blank"],["href","https://www.linkedin.com/in/magali-mouri%C3%B1o/","target","_blank"],["href","https://www.linkedin.com/in/giuliana-sofia-oliva-872a24258/","target","_blank"]],template:function(d,i){1&d&&(s.j41(0,"footer")(1,"p"),s.EFF(2,"@2023 Created by "),s.k0s(),s.j41(3,"a",0),s.EFF(4,"Cunsolo Mateo,"),s.k0s(),s.j41(5,"a",1),s.EFF(6,"Mouri\xf1o Magali"),s.k0s(),s.j41(7,"p"),s.EFF(8,"and"),s.k0s(),s.j41(9,"a",2),s.EFF(10,"Oliva Giuliana"),s.k0s()())},styles:["footer[_ngcontent-%COMP%]{bottom:0;width:100%;height:4.4rem;background-color:#000;color:var(--color-gris-claro);text-align:center;align-items:center;padding:10px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline;color:var(--color-gris-claro);margin-left:.5rem}"]})}return a})()},401:(y,u,n)=>{n.d(u,{G:()=>d});var s=n(177),l=n(4937),a=n(4438);const m=[];let h=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=a.$C({type:i});static#r=this.\u0275inj=a.G2t({imports:[l.iI.forChild(m),l.iI]})}return i})(),d=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275mod=a.$C({type:i});static#r=this.\u0275inj=a.G2t({imports:[s.MD,h]})}return i})()}}]);